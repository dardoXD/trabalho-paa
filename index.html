<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <title>Trabalho de Projeto e Análise de Algoritmos</title>
    <script src="js/chartist.min.js"></script>
    <link href="css/chartist.min.css" rel="stylesheet" type="text/css"/>
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <link rel="stylesheet" type="text/css" href="css/semantic.min.css">
    <script src="js/jquery-3.1.1.min.js"></script>
</head>
<body>
<div class="ui top fixed inverted menu">
    <a class="item">Técnica 1</a>
    <a class="item">Técnica 2</a>
</div>
<br>
<div class="ui inverted stripe segment">
    <div class="ui grid centered">
        <div class="row">
            <div class="ui center aligned column">
                <h1 class="ui inverted header">Algoritmos de ordenação - Insertion Sort</h1>
            </div>
        </div>

        <div class="row">
            <form class="ui inverted form">
                <div class="field">
                    <input type="number" name="n1" id="n1">
                </div>
                <div class="field">
                    <input type="button" class="ui inverted button" onclick="adicionarElemento()"
                           value="Adicionar elemento">
                </div>
                <div class="inline fields">
                    <div class="field">
                        <input type="button" class="ui inverted button" onclick="embaralharElementos()"
                               value="Embaralhar dados iniciais">
                    </div>
                    <div class="field">
                        <input type="button" class="ui inverted button" onclick="removerUltimoElemento()"
                               value="Remover último adicionado">
                    </div>
                    <div class="field">
                        <input type="button" class="ui inverted button" onclick="removerElemento()"
                               value="Remover especificado">
                    </div>
                    <div class="field">
                        <input type="button" class="ui inverted button" onclick="limparGrafico()"
                               value="Limpar tudo">
                    </div>
                </div>

                <div class="field">
                    <input type="button" class="ui huge inverted button" onclick="ordernar()" value="Ordenar">
                </div>

            </form>
        </div>

        <div class="row">
            <div class="ct-chart ct-golden-section"></div>
        </div>

        <script type="application/javascript">
            dados = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15];
            dados = dados.reverse();
            max = 15;
            desenharGrafico()

            function adicionarElemento() {
                dados.push(document.getElementById("n1").value);
                desenharGrafico();
            }

            function limparGrafico() {
                dados = [];
                desenharGrafico();
            }

            function embaralharElementos() {
                for (var i = dados.length - 1; i > 0; i--) {
                    var j = Math.floor(Math.random() * (i + 1));
                    var aux = dados[i];
                    dados[i] = dados[j];
                    dados[j] = aux;
                }
                desenharGrafico();
            }

            function removerElemento() {
                index = dados.indexOf(document.getElementById("n1").value);
                if (index > -1) {
                    dados.splice(index, 1);
                }
                desenharGrafico();
            }

            function removerUltimoElemento() {
                dados.pop();
                desenharGrafico()
            }

            function sleep(milliseconds) {
                var start = new Date().getTime();
                for (var i = 0; i < 1e7; i++) {
                    if ((new Date().getTime() - start) > milliseconds){
                        break;
                    }
                }
            }

            function ordernar() {

                i = -1;
                j = -1;

//                grafico = desenharGrafico();
                grafico = new Chartist.Bar('.ct-chart', {
                    labels: dados,
                    series: [
                        dados
                    ]
                }, {
                    seriesBarDistance: 15,
                    axisX: {
                        showGrid: false
                    },
                    axisY: {
                        position: false
                    }
                }).on('draw', function(context) {

//                            console.log(context);
                    // First we want to make sure that only do something when the draw event is for bars. Draw events do get fired for labels and grids too.
                    if(context.type === 'bar') {
                        console.log("context.index");
                        console.log(context.index);
                        console.log("i");
                        console.log(i);
                        if (context.index == i || context.index == j) {
                            // With the Chartist.Svg API we can easily set an attribute on our bar that just got drawn
                            context.element.attr({
                                // Now we set the style attribute on our bar to override the default color of the bar. By using a HSL colour we can easily set the hue of the colour dynamically while keeping the same saturation and lightness. From the context we can also get the current value of the bar. We use that value to calculate a hue between 0 and 100 degree. This will make our bars appear green when close to the maximum and red when close to zero.
                                style: 'stroke: red;'
                            });

//                            context.element.label()
//                        }
                        }
                    } });

                for (i = 1; i < dados.length; i++) {
                    j = i;
                    while (j > 0 && dados[j - 1] > dados[j]) {
                        aux = dados[j];
                        dados[j] = dados[j - 1];
                        dados[j - 1] = aux;
                        j--;
//                        grafico.update(dados);


//
//                        console.log(document.getElementsByClassName("ct-bar"));
//                        bar1 = document.getElementsByClassName("ct-bar")[i];
//                        bar2 = document.getElementsByClassName("ct-bar")[j];
//                        console.log(bar1);
//                        console.log(bar2);
//
//                        bar1.className += "destaque";
//                        bar2.className += "destaque";



//                        grafico.createAndShow();
                        grafico.show();

//                        var start = new Date().getTime();
//                        for (var k = 0; k < 1e7; k++) {
//                            if ((new Date().getTime() - start) > 1000){
//                                break;
//                            }
//                        }

//                        desenharGrafico2(i, j);
                    }
                }
            }


            function desenharGrafico2(i, j) {
                return new Chartist.Bar('.ct-chart', {
                    labels: dados,
                    series: [
                        dados
                    ]
                }, {
                    seriesBarDistance: 15,
                    axisX: {
                        showGrid: false
                    },
                    axisY: {
                        position: false
                    }
                }).on('draw', function(context) {
//                            console.log(context);
                    // First we want to make sure that only do something when the draw event is for bars. Draw events do get fired for labels and grids too.
                    if(context.type === 'bar') {
                        console.log("context.index");
                        console.log(context.index);
                        console.log("i");
                        console.log(i);
                        if (context.index == i || context.index == j) {
                            // With the Chartist.Svg API we can easily set an attribute on our bar that just got drawn
                            context.element.attr({
                                // Now we set the style attribute on our bar to override the default color of the bar. By using a HSL colour we can easily set the hue of the colour dynamically while keeping the same saturation and lightness. From the context we can also get the current value of the bar. We use that value to calculate a hue between 0 and 100 degree. This will make our bars appear green when close to the maximum and red when close to zero.
                                style: 'stroke: red;'
                            });
                        }
                    }
                });
            }
            function desenharGrafico() {
                return new Chartist.Bar('.ct-chart', {
                    labels: dados,
                    series: [
                        dados
                    ]
                }, {
                    seriesBarDistance: 15,
                    axisX: {
                        showGrid: false
                    },
                    axisY: {
                        position: false
                    }
                });

//                    .on('draw', function(context) {
//                    // First we want to make sure that only do something when the draw event is for bars. Draw events do get fired for labels and grids too.
//                    if(context.type === 'bar') {
//                        // With the Chartist.Svg API we can easily set an attribute on our bar that just got drawn
//                        context.element.attr({
//                            // Now we set the style attribute on our bar to override the default color of the bar. By using a HSL colour we can easily set the hue of the colour dynamically while keeping the same saturation and lightness. From the context we can also get the current value of the bar. We use that value to calculate a hue between 0 and 100 degree. This will make our bars appear green when close to the maximum and red when close to zero.
//                            style: 'stroke: hsl(' + Math.floor(Chartist.getMultiValue(context.value) / max * 100) + ', 50%, 50%);'
//                        });
//                    }
//                });
            }

        </script>

        <div class="ui inverted vertical footer segment">
            <div class="ui grid container">
                <div class="ui column">
                    <h3 class="ui inverted header">UNIVERSIDADE FEDERAL DE SÃO CARLOS<br>Departamento de Computação<br>
                        Projeto e Análise de Algoritmos - 2016/2</h3>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>